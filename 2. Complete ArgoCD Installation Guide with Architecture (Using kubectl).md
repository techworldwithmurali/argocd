

## ðŸš€ **Complete ArgoCD Installation Guide with Architecture (Using kubectl)**

---

### âœ… **Step 1: Create Namespace for ArgoCD**

```bash
kubectl create namespace argocd
```

---

### âœ… **Step 2: Install ArgoCD Core Components**

Apply the official manifest from ArgoCD GitHub:

```bash
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
```

This deploys the following key components into the `argocd` namespace.

---

### âœ… **ArgoCD Core Components Explained**

#### ðŸ“˜ 1. `argocd-server`

* The **API server** and **backend for the UI and CLI**.
* Handles:

  * Login, authentication
  * RBAC (role-based access)
  * Exposes REST/gRPC APIs
* Communicates with `argocd` CLI and ArgoCD Web UI.

#### ðŸ“˜ 2. `argocd-repo-server`

* **Clones Git repositories** and **renders manifests** using:

  * Helm
  * Kustomize
  * Jsonnet or plain YAML
* Converts Git code into desired Kubernetes configurations.

#### ðŸ“˜ 3. `argocd-application-controller`

* **Monitors and compares** actual vs desired state.
* If drift is detected:

  * Marks the application out of sync.
  * Optionally syncs the cluster back to Git state (auto-sync).
* Performs:

  * Sync
  * Rollbacks
  * Health checks

#### ðŸ“˜ 4. `argocd-dex-server`

* **Authentication provider** using OIDC protocol.
* Supports:

  * GitHub
  * Google
  * LDAP/AD
  * SAML
* Optional but enabled by default for external login.

#### ðŸ“˜ 5. `argocd-redis`

* Internal **cache** used to:

  * Store application status
  * Session data
  * Improve performance of UI/API queries

---

### âœ… **Step 3: Access the ArgoCD UI**

> **Option 1: Port-Forwarding (for local testing)**

```bash
kubectl port-forward svc/argocd-server -n argocd 8080:443
```

Then visit:
ðŸ”— [https://localhost:8080](https://localhost:8080)

---

### âœ… **Step 4: Get Admin Password**

```bash
kubectl get secret argocd-initial-admin-secret -n argocd -o jsonpath="{.data.password}" | base64 -d && echo
```

* **Username:** `admin`
* **Password:** (output above)

> You can change this later via the UI or CLI.

---

### âœ… **(Optional) Step 5: Expose ArgoCD Using LoadBalancer or Ingress**

#### Using LoadBalancer:

```bash
kubectl patch svc argocd-server -n argocd -p '{"spec": {"type": "LoadBalancer"}}'
```

Then run:

```bash
kubectl get svc argocd-server -n argocd
```

#### Using Ingress:

If you're using an ingress controller (like NGINX, ALB), create an Ingress resource with TLS and hostname. Let me know if you want an example.

---

### âœ… **Step 6: Verify Installation**

```bash
kubectl get all -n argocd
```

You should see pods like:

```
argocd-server
argocd-repo-server
argocd-application-controller
argocd-dex-server
argocd-redis
```

---

## âœ… Summary: Architecture Flow

```text
     +----------------+
     |    Git Repo    |
     +----------------+
             |
             v
   +----------------------+
   |  argocd-repo-server  |   <-- Clones and renders manifests
   +----------------------+
             |
             v
+-----------------------------+
| argocd-application-controller |  <-- Reconciles and syncs with cluster
+-----------------------------+
             |
             v
   +---------------------+
   |  Kubernetes Cluster |
   +---------------------+

      â–²         â–²
      |         |
      |         v
+---------------------+    +------------------+
|    argocd-server     |<-->|  argocd-dex-server |
| (API + Web Backend) |    | (OIDC Auth Layer) |
+---------------------+    +------------------+
```

---

Would you like the **next step with a sample ArgoCD Application YAML** to deploy a real app using this setup?
